<?xml version="1.0" encoding="UTF-8"?>
<document>
	<properties>
		<title>Core</title>
	</properties>
	<body>
		<section name="目次">
			<ul>
				<li><p><a href="#概要">概要</a></p></li>
				<li><p><a href="#MessageSender">MessageSender</a></p></li>
				<li><p><a href="#MessageReceiver">MessageReceiver</a></p></li>
			</ul>
		</section>

		<section name="概要">
			<p>
				S2JMS-Coreは，JMSメッセージを容易に送受信するためのコンポーネントを提供します．
				主なコンポーネントは次の二つです．
			</p>
			<dl>
				<dt>MessageSender</dt>
				<dd>
					JMSメッセージを送信する場合に使用するコンポーネントです．
				</dd>
				<dt>MessageReceiver</dt>
				<dd>
					JMSメッセージを受信する場合に使用するコンポーネントです．
				</dd>
			</dl>
		</section>

		<section name="MessageSender">
			<p>
				<code>MessageSender</code>は、JMSメッセージを送信するコンポーネントです。
			</p>
			<p>
			送信するJMSメッセージを容易に作成するために次のメソッドを使用することができます。
			</p>
			<ul>
				<li><p>
					<code>send(byte[] bytes)</code>
					<div>
						引数で指定されたバイト列をペイロードデータとする<code>BytesMessage</code>を作成して送信します。
					</div>
				</p></li>
				<li><p>
					<code>send(Map&lt;String, Object&gt; map)</code>
					<div>
						引数で指定された<code>Map</code>に含まれるマッピングをペイロードデータとする<code>MapMessage</code>を作成して送信します。
					</div>
				</p></li>
				<li><p>
					<code>send(Serializable object)</code>
					<div>
						引数で指定されたオブジェクトをペイロードデータとする<code>ObjectMessage</code>を作成して送信します。
					</div>
				</p></li>
				<li><p>
					<code>send(String text)</code>
					<div>
						引数で指定された文字列をペイロードデータとする<code>TextMessage</code>を作成して送信します。
					</div>
				</p></li>
			</ul>
			<p>
				作成されるJMSメッセージのヘッダを指定するには、次のメソッドを使用します。
			</p>
			<ul>
				<li><p><code>setCorrelationID(final String correlationID)</code></p></li>
				<li><p><code>setCorrelationIDAsBytes(final byte[] correlationIDAsBytes)</code></p></li>
				<li><p><code>setReplyTo(Destination replyTo)</code></p></li>
			</ul>
			<p>
				作成されるJMSメッセージのプロパティを指定するには、次のメソッドを使用します。
			</p>
			<ul>
				<li><p><code>addProperty(String name, Object value)</code></p></li>
				<li><p><code>addProperties(Map&lt;String, Object&gt; properties)</code></p></li>
			</ul>
			<p>
				送信するJMSメッセージをより詳細に設定するには次のメソッドを使用します。
			</p>
			<ul>
				<li><p>
					<code>send(MessageFactory)</code>
					<div>
						引数で指定された<code>MessageFactory</code>が作成したJMSメッセージを送信します。
					</div>
				</p></li>
				<li><p>
					<code>send()</code>
					<div>
						<code>MessageSender</code>のプロパティに設定された<code>MessageFactory</code>が作成したJMSメッセージを送信します。
					</div>
				</p></li>
			</ul>
			<p>
				送信されたJMSメッセージを取得するには、次のメソッドを使用します。
			</p>
			<ul>
				<li><p><code>getMessage()</code></p></li>
			</ul>
			<p>
				送信されたJMSメッセージのヘッダを取得するには、次のメソッドを使用します。
			</p>
			<ul>
				<li><p><code>getMessageID()</code></p></li>
				<li><p><code>getTimestamp()</code></p></li>
				<li><p><code>getExpiration()</code></p></li>
			</ul>
		</section>

		<section name="MessageReceiver">
			<p>
				<code>MessageReceiver</code>は、JMSメッセージを受信するコンポーネントです。
			</p>
			<p>
				受信したメッセージを容易に処理するために次のメソッドを使用することができます。
			</p>
			<ul>
				<li><p>
					<code>receiveBytes()</code>
					<div>
						受信した<code>BytesMessage</code>のペイロードデータであるバイト列を返します。
					</div>
				</p></li>
				<li><p>
					<code>receiveMap()</code>
					<div>
						受信した<code>MapMessage</code>のペイロードデータに含まれるマッピングを持つ<code>Map</code>を返します。
					</div>
				</p></li>
				<li><p>
					<code>receiveObject()</code>
					<div>
						受信した<code>ObjectMessage</code>のペイロードデータであるオブジェクトを返します。
					</div>
				</p></li>
				<li><p>
					<code>receiveText()</code>
					<div>
						受信した<code>TextMessage</code>のペイロードデータである文字列を返します。
					</div>
				</p></li>
			</ul>
			<p>
				受信したJMSメッセージを独自に処理するには次のメソッドを使用することができます。
			</p>
			<ul>
				<li><p>
					<code>receive(MessageHandler messageHandler)</code>
					<div>
						引数で指定する<code>MessageHandler</code>により自由にJMSメッセージを処理することができます。
						このメソッドは<code>MessageHandler#handleMessage(Message)</code>の戻り値をそのまま返します。
					</div>
				</p></li>
			</ul>
			<p>
				受信したJMSメッセージをそのまま取得するには次のメソッドを使用することができます。
			</p>
			<ul>
				<li><p><code>receive()</code></p></li>
			</ul>
			<p>
				受信可能なJMSメッセージがまだない場合の動作は次のメソッドで設定します．
			</p>
			<ul>
				<li><p>
					<code>setTimeout(long timeout)</code>
					<div>
						<code>timeout</code>に指定する値は次のようになります．
						<dl>
							<dt>正の数</dt>
							<dd>
								JMSメッセージを受信するまで指定された時間待機します (ミリ秒単位)。
							</dd>
							<dt><code>0</code></dt>
							<dd>
								JMSメッセージが受信できなければ待機しません。
							</dd>
							<dt>負の数</dt>
							<dd>
								JMSメッセージを受信するまで無制限に待機します。
							</dd>
						</dl>
					</div>
				</p></li>
			</ul>
			<p>
				受信するJMSメッセージを選択するために次のメソッドを使用することができます。
			</p>
			<ul>
				<li><p><code>setMessageSelector(String messageSelector)</code></p></li>
			</ul>
			<p>
				受信したJMSメッセージを取得するには、次のメソッドを使用します。
				<code>receiveText()</code>等を呼び出した後でもJMSメッセージを取得することができます．
			</p>
			<ul>
				<li><p><code>getMessage()</code></p></li>
			</ul>
			<p>
				受信したJMSメッセージのヘッダを取得するには、次のメソッドを使用します。
			</p>
			<ul>
				<li><p><code>getMessageID()</code></p></li>
				<li><p><code>getTimestamp()</code></p></li>
				<li><p><code>getExpiration()</code></p></li>
			</ul>
		</section>
	</body>
</document>
